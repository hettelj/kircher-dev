# Change File Names
print "Which file? "
filename = gets.chomp

# Converting OCLC output to SOLR document structure.
replace_title_ID = '<doc><field name="id">'
replace_volume = '</field><field name="volume">'
replace_title = '</field><field name="title">'
replace_annotator = '</field><field name="annotator">'
replace_annotator_occ = '</field><field name="annotator_occ">'
replace_author = '</field><field name="author">'
replace_author_occ = '</field><field name="author_occ">'
replace_author_of_cited_book = '</field><field name="author_of_cited_book">'
replace_author_of_cited_book_occ = '</field><field name="author_of_cited_book_occ">'
replace_author_of_postscript = '</field><field name="author_of_postscript_book">'
replace_author_of_postscript_occ = '</field><field name="author_of_postscript_occ">'
replace_copyist = '</field><field name="copyist">'
replace_copyist_occ = '</field><field name="copyist_occ">'
replace_ex_libris = '</field><field name="ex_libris">'
replace_ex_libris_occ = '</field><field name="ex_libris_occ">'
replace_presumed_author = '</field><field name="presumed_author">'
replace_presumed_author_occ = '</field><field name="presumed_author_occ">'
replace_presumed_recipient = '</field><field name="presumed_recipient">'
replace_presumed_recipient_occ = '</field><field name="presumed_recipient_occ">'
replace_presumed_sender = '</field><field name="presumed_sender">'
replace_presumed_sender_occ = '</field><field name="presumed_sender_occ">'
replace_quoted_name = '</field><field name="quoted_name">'
replace_quoted_name_occ = '</field><field name="quoted_name_occ">'
replace_recipient = '</field><field name="recipient">'
replace_recipient_occ = '</field><field name="recipient_occ">'
replace_related_name = '</field><field name="related_name">'
replace_related_name_occ = '</field><field name="related_name_occ">'
replace_sender = '</field><field name="sender">'
replace_sender_occ = '</field><field name="sender_occ">'
replace_signatory = '</field><field name="signatory">'
replace_signatory_occ = '</field><field name="signatory_occ">'
replace_translator = '</field><field name="translator">'
replace_translator_occ = '</field><field name="translator_occ">'
replace_text_type = '</field><field name="text_type">'
replace_comment = '</field><field name="comment">'
replace_subject = '</field><field name="subject">'
replace_language = '</field><field name="language">'
replace_acomp_date = '</field><field name="acomp_letter_date">'
replace_acomp_letter_year = '</field><field name="acomp_letter_year">'
replace_acomp_letter_place = '</field><field name="acomp_letter_place">'
replace_old_style_letter_date = '</field><field name="old_style_letter_date">'
replace_old_style_letter_year = '</field><field name="old_style_letter_year_year">'
replace_old_style_letter_place = '</field><field name="old_style_letter_place">'
replace_composition_date = '</field><field name="composition_date">'
replace_composition_year = '</field><field name="composition_year">'
replace_composition_place = '</field><field name="composition_place">'
replace_copy_date = '</field><field name="copy_date">'
replace_copy_year = '</field><field name="copy_year">'
replace_copy_place = '</field><field name="copy_place">'
replace_new_document_date = '</field><field name="new_document_date">'
replace_new_document_year = '</field><field name="new_document_year">'
replace_new_document_place = '</field><field name="new_document_place">'
replace_letter_date = '</field><field name="letter_date">'
replace_letter_year = '</field><field name="letter_year">'
replace_letter_place = '</field><field name="letter_place">'
replace_letter_ab_date = '</field><field name="letter_ab_date">'
replace_letter_ab_year = '</field><field name="letter_ab_year">'
replace_letter_ab_place = '</field><field name="letter_ab_place">'
replace_new_style_letter_date = '</field><field name="new_style_letter_date">'
replace_new_style_letter_year = '</field><field name="new_style_letter_year">'
replace_new_style_letter_place = '</field><field name="new_style_letter_place">'
replace_letter_referred_to_date = '</field><field name="letter_referred_to_date">'
replace_letter_referred_to_year = '</field><field name="letter_referred_to_year">'
replace_letter_referred_to_place = '</field><field name="letter_referred_to_place">'
replace_manuscript_referred_to_date = '</field><field name="manuscript_referred_to_date">'
replace_manuscript_referred_to_year = '</field><field name="manuscript_referred_to_year">'
replace_manuscript_referred_to_place = '</field><field name="manuscript_referred_to_place">'
replace_manuscript_date = '</field><field name="manuscript_date">'
replace_manuscript_year = '</field><field name="manuscript_year">'
replace_manuscript_place = '</field><field name="manuscript_place">'
replace_observation_date = '</field><field name="observation_date">'
replace_observation_year = '</field><field name="observation_year">'
replace_observation_place = '</field><field name="observation_place">'
replace_original_sent_date = '</field><field name="original_sent_date">'
replace_original_sent_year = '</field><field name="original_sent_year">'
replace_original_sent_place = '</field><field name="original_sent_place">'
replace_proclamation_date = '</field><field name="proclamation_date">'
replace_proclamation_year = '</field><field name="proclamation_year">'
replace_proclamation_place = '</field><field name="proclamation_place">'
replace_publication_date = '</field><field name="publication_date">'
replace_publication_year = '</field><field name="publication_year">'
replace_publication_place = '</field><field name="publication_place">'
replace_quoted_date = '</field><field name="quoted_date">'
replace_quoted_year = '</field><field name="quoted_year">'
replace_quoted_place = '</field><field name="quoted_place">'
replace_url1 = '</field><field name="url1">'
replace_url2 = '</field><field name="url2">'
replace_url3 = '</field><field name="url3">'
replace_url4 = '</field><field name="url4">'
replace_url5 = '</field><field name="url5">'
replace_url6 = '</field><field name="url6">'
replace_url7 = '</field><field name="url7">'
replace_url8 = '</field><field name="url8">'
replace_url9 = '</field><field name="url9">'
replace_url10 = '</field><field name="url10">'
replace_url11 = '</field><field name="url11">'
replace_url12 = '</field><field name="url12">'
replace_url13 = '</field><field name="url13">'
replace_url14 = '</field><field name="url14">'
replace_url15 = '</field><field name="url15">'
replace_url16 = '</field><field name="url16">'
replace_url17 = '</field><field name="url17">'
replace_url18 = '</field><field name="url18">'
replace_url19 = '</field><field name="url19">'
replace_url20 = '</field><field name="url20">'
replace_url21 = '</field><field name="url21">'
replace_url22 = '</field><field name="url22">'
replace_url23 = '</field><field name="url23">'
replace_url24 = '</field><field name="url24">'
replace_url25 = '</field><field name="url25">'
replace_url26 = '</field><field name="url26">'
replace_url27 = '</field><field name="url27">'
replace_url28 = '</field><field name="url28">'
replace_url29 = '</field><field name="url29">'
replace_url30 = '</field><field name="url30">'
replace_url31 = '</field><field name="url31">'
replace_url32 = '</field><field name="url32">'
replace_url33 = '</field><field name="url33">'
replace_url34 = '</field><field name="url34">'
replace_url35 = '</field><field name="url35">'
replace_url36 = '</field><field name="url36">'
replace_url37 = '</field><field name="url37">'
replace_url38 = '</field><field name="url38">'
replace_url39 = '</field><field name="url39">'
replace_url40 = '</field><field name="url40">'
replace_url41 = '</field><field name="url41">'
replace_url42 = '</field><field name="url42">'
replace_url43 = '</field><field name="url43">'
replace_url44 = '</field><field name="url44">'
replace_url45 = '</field><field name="url45">'
replace_url46 = '</field><field name="url46">'
replace_url47 = '</field><field name="url47">'
replace_url48 = '</field><field name="url48">'
replace_url49 = '</field><field name="url49">'
replace_url50 = '</field><field name="url50">'
replace_url51 = '</field><field name="url51">'
replace_url52 = '</field><field name="url52">'
replace_url53 = '</field><field name="url53">'
replace_url54 = '</field><field name="url54">'
replace_url55 = '</field><field name="url55">'
replace_url56 = '</field><field name="url56">'
replace_url57 = '</field><field name="url57">'
replace_url58 = '</field><field name="url58">'
replace_url59 = '</field><field name="url59">'
replace_url60 = '</field><field name="url60">'
replace_url61 = '</field><field name="url61">'
replace_url62 = '</field><field name="url62">'
replace_url63 = '</field><field name="url63">'
replace_url64 = '</field><field name="url64">'
replace_url65 = '</field><field name="url65">'
replace_url66 = '</field><field name="url66">'
replace_url67 = '</field><field name="url67">'
replace_url68 = '</field><field name="url68">'
replace_url69 = '</field><field name="url69">'
replace_url70 = '</field><field name="url70">'
replace_url71 = '</field><field name="url71">'
replace_url72 = '</field><field name="url72">'
replace_url73 = '</field><field name="url73">'
replace_url74 = '</field><field name="url74">'
replace_url75 = '</field><field name="url75">'
replace_url76 = '</field><field name="url76">'
replace_url77 = '</field><field name="url77">'
replace_url78 = '</field><field name="url78">'
replace_url79 = '</field><field name="url79">'
replace_url80 = '</field><field name="url80">'
replace_url81 = '</field><field name="url81">'
replace_url82 = '</field><field name="url82">'
replace_url83 = '</field><field name="url83">'
replace_url84 = '</field><field name="url84">'
replace_url85 = '</field><field name="url85">'
replace_url86 = '</field><field name="url86">'
replace_url87 = '</field><field name="url87">'
replace_url88 = '</field><field name="url88">'
replace_url89 = '</field><field name="url89">'
replace_url90 = '</field><field name="url90">'
replace_url91 = '</field><field name="url91">'
replace_url92 = '</field><field name="url92">'
replace_url93 = '</field><field name="url93">'
replace_url94 = '</field><field name="url94">'
replace_url95 = '</field><field name="url95">'
replace_url96 = '</field><field name="url96">'
replace_url97 = '</field><field name="url97">'
replace_url98 = '</field><field name="url98">'
replace_url99 = '</field><field name="url99">'
replace_url100 = '</field><field name="url100">'
replace_url101 = '</field><field name="url101">'
replace_url102 = '</field><field name="url102">'
replace_url103 = '</field><field name="url103">'
replace_url104 = '</field><field name="url104">'
replace_url105 = '</field><field name="url105">'
replace_url106 = '</field><field name="url106">'
replace_url107 = '</field><field name="url107">'
replace_url108 = '</field><field name="url108">'
replace_url109 = '</field><field name="url109">'
replace_url110 = '</field><field name="url110">'
replace_url111 = '</field><field name="url111">'
replace_url112 = '</field><field name="url112">'
replace_url113 = '</field><field name="url113">'
replace_url114 = '</field><field name="url114">'
replace_url115 = '</field><field name="url115">'
replace_url116 = '</field><field name="url116">'
replace_endoffile = '</field></doc>'
replace_space = ''

#Doing replacements and saving files.
outdata = File.read(filename).gsub(/letter (ab inc.) date\t/, "#{replace_letter_ab_date}").gsub(/letter (ab inc.) year\t/, "#{replace_letter_ab_year}").gsub(/letter (ab inc.) place\t/, "#{replace_letter_ab_place}").gsub(/new style letter date\t/, "#{replace_new_style_letter_date}").gsub(/new style letter year\t/, "#{replace_new_style_letter_year}").gsub(/new style letter place\t/, "#{replace_new_style_letter_place}").gsub(/letter referred to date\t/, "#{replace_letter_referred_to_date}").gsub(/letter referred to year\t/, "#{replace_letter_referred_to_year}").gsub(/letter referred to place\t/, "#{replace_letter_referred_to_place}").gsub(/accomp_date\t/, "#{replace_acomp_date}").gsub(/accomp_letter year\t/, "#{replace_acomp_letter_year}").gsub(/accomp_letter place\t/, "#{replace_acomp_letter_place}").gsub(/old_style_letter date\t/, "#{replace_old_style_letter_date}").gsub(/old_style_letter year\t/, "#{replace_old_style_letter_year}").gsub(/old_style_letter place\t/, "#{replace_old_style_letter_place}").gsub(/presumed_author\t/, "#{replace_presumed_author}").gsub(/presumed_author occupation\t/, "#{replace_presumed_author_occ}").gsub(/presumed_recipient\t/, "#{replace_presumed_recipient}").gsub(/presumed_recipient occupation\t/, "#{replace_presumed_recipient_occ}").gsub(/presumed_sender\t/, "#{replace_presumed_sender}").gsub(/presumed_sender occupation\t/, "#{replace_presumed_sender_occ}").gsub(/title ID\t/, "#{replace_title_ID}").gsub(/\tvolume\t/, "#{replace_volume}").gsub(/\ttitle\t"/, "#{replace_title}").gsub(/\ttitle\t/, "#{replace_title}").gsub(/annotator\t/, "#{replace_annotator}").gsub(/annotator occupation\t/, "#{replace_annotator_occ}").gsub(/author\t/, "#{replace_author}").gsub(/author occupation\t/, "#{replace_author_occ}").gsub(/author_of_cited_book\t/, "#{replace_author_of_cited_book}").gsub(/author of cited book occupation\t/, "#{replace_author_of_cited_book_occ}").gsub(/author_of_postscript\t/, "#{replace_author_of_postscript}").gsub(/author_of_postscript occupation\t/, "#{replace_author_of_postscript_occ}").gsub(/copyist\t/, "#{replace_copyist}").gsub(/copyist occupation\t/, "#{replace_copyist_occ}").gsub(/ex_libris\t/, "#{replace_ex_libris}").gsub(/ex_libris occupation\t/, "#{replace_ex_libris_occ}").gsub(/quoted_name\t/, "#{replace_quoted_name}").gsub(/quoted_name occupation\t/, "#{replace_quoted_name_occ}").gsub(/recipient\t/, "#{replace_recipient}").gsub(/recipient occupation\t/, "#{replace_recipient_occ}").gsub(/related_name\t/, "#{replace_related_name}").gsub(/related_name occupation\t/, "#{replace_related_name_occ}").gsub(/sender\t/, "#{replace_sender}").gsub(/sender occupation\t/, "#{replace_sender_occ}").gsub(/signatory\t/, "#{replace_signatory}").gsub(/signatory occupation\t/, "#{replace_signatory_occ}").gsub(/translator\t/, "#{replace_translator}").gsub(/translator occupation\t/, "#{replace_translator_occ}").gsub(/text type\t/, "#{replace_text_type}").gsub(/comment\t"/, "#{replace_comment}").gsub(/comment\t/, "#{replace_comment}").gsub(/"\tsubject\t/, "#{replace_subject}").gsub(/\tsubject\t/, "#{replace_subject}").gsub(/language\t/, "#{replace_language}").gsub(/composition date\t/, "#{replace_composition_date}").gsub(/composition year\t/, "#{replace_composition_year}").gsub(/composition place\t/, "#{replace_composition_place}").gsub(/copy date\t/, "#{replace_copy_date}").gsub(/copy year\t/, "#{replace_copy_year}").gsub(/copy place\t/, "#{replace_copy_place}").gsub(/new document date\t/, "#{replace_new_document_date}").gsub(/new document year\t/, "#{replace_new_document_year}").gsub(/new document place\t/, "#{replace_new_document_place}").gsub(/letter date\t/, "#{replace_letter_date}").gsub(/letter year\t/, "#{replace_letter_year}").gsub(/letter place\t/, "#{replace_letter_place}").gsub(/manuscript referred to date\t/, "#{replace_manuscript_referred_to_date}").gsub(/manuscript referred to year\t/, "#{replace_manuscript_referred_to_year}").gsub(/manuscript referred to place\t/, "#{replace_manuscript_referred_to_place}").gsub(/manuscript date\t/, "#{replace_manuscript_date}").gsub(/manuscript year\t/, "#{replace_manuscript_year}").gsub(/manuscript place\t/, "#{replace_manuscript_place}").gsub(/observation date\t/, "#{replace_observation_date}").gsub(/observation year\t/, "#{replace_observation_year}").gsub(/observation place\t/, "#{replace_observation_place}").gsub(/original sent date\t/, "#{replace_original_sent_date}").gsub(/original sent year\t/, "#{replace_original_sent_year}").gsub(/original sent place\t/, "#{replace_original_sent_place}").gsub(/proclamation date\t/, "#{replace_proclamation_date}").gsub(/proclamation year\t/, "#{replace_proclamation_year}").gsub(/proclamation place\t/, "#{replace_proclamation_place}").gsub(/publication date\t/, "#{replace_publication_date}").gsub(/publication year\t/, "#{replace_publication_year}").gsub(/publication place\t/, "#{replace_publication_place}").gsub(/quoted date\t/, "#{replace_quoted_date}").gsub(/quoted year\t/, "#{replace_quoted_year}").gsub(/quoted place\t/, "#{replace_quoted_place}").gsub(/url1\t/, "#{replace_url1}").gsub(/url2\t/, "#{replace_url2}").gsub(/url3\t/, "#{replace_url3}").gsub(/url4\t/, "#{replace_url4}").gsub(/url5\t/, "#{replace_url5}").gsub(/url6\t/, "#{replace_url6}").gsub(/url7\t/, "#{replace_url7}").gsub(/url8\t/, "#{replace_url8}").gsub(/url9\t/, "#{replace_url9}").gsub(/url10\t/, "#{replace_url10}").gsub(/url11\t/, "#{replace_url11}").gsub(/url12\t/, "#{replace_url12}").gsub(/url13\t/, "#{replace_url13}").gsub(/url14\t/, "#{replace_url14}").gsub(/url15\t/, "#{replace_url15}").gsub(/url16\t/, "#{replace_url16}").gsub(/url17\t/, "#{replace_url17}").gsub(/url18\t/, "#{replace_url18}").gsub(/url19\t/, "#{replace_url19}").gsub(/url20\t/, "#{replace_url20}").gsub(/url21\t/, "#{replace_url21}").gsub(/url22\t/, "#{replace_url22}").gsub(/url23\t/, "#{replace_url23}").gsub(/url24\t/, "#{replace_url24}").gsub(/url25\t/, "#{replace_url25}").gsub(/url26\t/, "#{replace_url26}").gsub(/url27\t/, "#{replace_url27}").gsub(/url28\t/, "#{replace_url28}").gsub(/url29\t/, "#{replace_url29}").gsub(/url30\t/, "#{replace_url30}").gsub(/url31\t/, "#{replace_url31}").gsub(/url32\t/, "#{replace_url32}").gsub(/url33\t/, "#{replace_url33}").gsub(/url34\t/, "#{replace_url34}").gsub(/url35\t/, "#{replace_url35}").gsub(/url36\t/, "#{replace_url36}").gsub(/url37\t/, "#{replace_url37}").gsub(/url38\t/, "#{replace_url38}").gsub(/url39\t/, "#{replace_url39}").gsub(/url40\t/, "#{replace_url40}").gsub(/url41\t/, "#{replace_url41}").gsub(/url42\t/, "#{replace_url42}").gsub(/url43\t/, "#{replace_url43}").gsub(/url44\t/, "#{replace_url44}").gsub(/url45\t/, "#{replace_url45}").gsub(/url46\t/, "#{replace_url46}").gsub(/url47\t/, "#{replace_url47}").gsub(/url116\t/, "#{replace_url116}").gsub(/url48\t/, "#{replace_url48}").gsub(/url48\t/, "#{replace_url48}").gsub(/url49\t/, "#{replace_url49}").gsub(/url50\t/, "#{replace_url50}").gsub(/url51\t/, "#{replace_url51}").gsub(/url52\t/, "#{replace_url52}").gsub(/url53\t/, "#{replace_url53}").gsub(/url54\t/, "#{replace_url54}").gsub(/url55\t/, "#{replace_url55}").gsub(/url56\t/, "#{replace_url56}").gsub(/url57\t/, "#{replace_url57}").gsub(/url58\t/, "#{replace_url58}").gsub(/url59\t/, "#{replace_url59}").gsub(/url60\t/, "#{replace_url60}").gsub(/url61\t/, "#{replace_url61}").gsub(/url62\t/, "#{replace_url62}").gsub(/url63\t/, "#{replace_url63}").gsub(/url64\t/, "#{replace_url64}").gsub(/url65\t/, "#{replace_url65}").gsub(/url66\t/, "#{replace_url66}").gsub(/url67\t/, "#{replace_url67}").gsub(/url68\t/, "#{replace_url68}").gsub(/url69\t/, "#{replace_url69}").gsub(/url70\t/, "#{replace_url70}").gsub(/url71\t/, "#{replace_url71}").gsub(/url72\t/, "#{replace_url72}").gsub(/url73\t/, "#{replace_url73}").gsub(/url74\t/, "#{replace_url74}").gsub(/url75\t/, "#{replace_url75}").gsub(/url76\t/, "#{replace_url76}").gsub(/url77\t/, "#{replace_url77}").gsub(/url78\t/, "#{replace_url78}").gsub(/url79\t/, "#{replace_url79}").gsub(/url80\t/, "#{replace_url80}").gsub(/url81\t/, "#{replace_url81}").gsub(/url82\t/, "#{replace_url82}").gsub(/url83\t/, "#{replace_url83}").gsub(/url84\t/, "#{replace_url84}").gsub(/url85\t/, "#{replace_url85}").gsub(/url86\t/, "#{replace_url86}").gsub(/url87\t/, "#{replace_url87}").gsub(/url88\t/, "#{replace_url88}").gsub(/url89\t/, "#{replace_url89}").gsub(/url90\t/, "#{replace_url90}").gsub(/url91\t/, "#{replace_url91}").gsub(/url92\t/, "#{replace_url92}").gsub(/url93\t/, "#{replace_url93}").gsub(/url94\t/, "#{replace_url94}").gsub(/url95\t/, "#{replace_url95}").gsub(/url96\t/, "#{replace_url96}").gsub(/url97\t/, "#{replace_url97}").gsub(/url98\t/, "#{replace_url98}").gsub(/url99\t/, "#{replace_url99}").gsub(/url100\t/, "#{replace_url100}").gsub(/url101\t/, "#{replace_url101}").gsub(/url102\t/, "#{replace_url102}").gsub(/url103\t/, "#{replace_url103}").gsub(/url104\t/, "#{replace_url104}").gsub(/url105\t/, "#{replace_url105}").gsub(/url106\t/, "#{replace_url106}").gsub(/url107\t/, "#{replace_url107}").gsub(/url108\t/, "#{replace_url108}").gsub(/url109\t/, "#{replace_url109}").gsub(/url110\t/, "#{replace_url110}").gsub(/url111\t/, "#{replace_url111}").gsub(/url112\t/, "#{replace_url112}").gsub(/url113\t/, "#{replace_url113}").gsub(/url114\t/, "#{replace_url114}").gsub(/url115\t/, "#{replace_url115}").gsub(/endoffile/, "#{replace_endoffile}").gsub(/\t/, "#{replace_space}")
File.open(filename, 'w') do |out|
  out << outdata
end  


puts "#{filename} has been processed."